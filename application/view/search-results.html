<!-- Alex Wolski:
     Course: CSc 648 Software Engineering Summer 2019 Team 2

     Displays all of the reports generated by a search.
     Places pins on a map representing the location of each reoprt.
     Users have the ability to filter the results using two dropdowns.

-->

<!DOCTYPE html>
<html>

<head>
  <title>Search</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-144569863-2"></script>
  <!-- These links and scripts provide us with Bootstrap, fonts, icons: -->
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://use.fontawesome.com/releases/v5.10.1/css/all.css" rel="stylesheet">
  <link href="https://use.fontawesome.com/releases/v5.10.1/css/v4-shims.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Barlow+Semi+Condensed:700|
                Cormorant+Garamond:700|Crimson+Text|Darker+Grotesque:500|Kreon&display=swap" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

  <!-- imports -->
  <link href="css/index.css" rel="stylesheet">
  <script type="text/javascript" src="js/navbar.js"></script>
  <script type="text/javascript" src="js/auth.js"></script>
  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDyuM-hX7dGj7gXBfLXyuwvAEhZo4sxj18"></script>
  <script type="text/javascript" src="js/search-map.js"></script>
  <script type="text/javascript" src="js/search.js"></script>
  <script type="text/javascript" src="js/dropdown.js"></script>
</head>

<body onload="populateSearchOptions(); search(); resizeMap();" onresize="resizeMap();">

  <div class="header">
    <div id="floatingHeader">
	    <!-- Will be populated with the html for the navbar on startup -->
	    <div id="navbar-placeholder"></div>

		<div class="container">
		    <form>
		      <br/>

		      <div class="form-box">

		        <div class="dropdown">
				  <p id="drop-label">
					Category:
				  </p>
		          <select class="form-control" name="category_id" id="categoryDropDown">
		            <option value="-1">None</option>
		          </select>
		        </div>

		        <div class="dropdown">
				  <p id="drop-label">
					Location:
				 </p>
		          <select class="form-control" name="location_id" id="locationDropDown">
		            <option value="-1">None</option>
		          </select>
		        </div>

	       <!-- <div class="dropdown">
				  <p id="drop-label">
					Park:
				 </p>
		          <select class="form-control" name="park_id" id="parkDropDown">
		            <option value="-1">None</option>
		          </select>
		        </div> -->

				<button class="btn btn-outline-primary" style="margin-left:5px;"
						 type='button' onclick="filterResults()">Apply Filter
				</button>

		      </div>
		    </form>
		</div>

		<div style="margin-left: 2.5%; margin-right: 2.5%;">
			<hr class="divider"/>
		</div>
	</div>

	<div class="container-fluid">
	    <div class="row justify-content-center">
	      <div class="col-sm-6">
	        <div class="legend">
	          <center class="legend-header">Hazards</center>
	        </div>

	        <div id="mapBox">
		        <div id="map"></div>
		    </div>
	      </div>

        <div class="col-sm-6">
          <div class="row justify-content-center">
            <div class="table-responsive-lg" id="table"></div>
          </div>
        </div>
	    </div>
	</div>
  </div>
</body>

</html>


<script type="text/javascript">
  //imports
  loadNavbar();
  getCategories();
  getLocations();
  getParks();
  initMap();

  //google analytics
  window.dataLayer = window.dataLayer || [];

  function gtag() {
    dataLayer.push(arguments);
  }

  gtag('js', new Date());
  gtag('config', 'UA-144569863-2');
</script>
